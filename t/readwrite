use Finance::QIF;

my $in=Finance::QIF->new(file                   => $ARGV[0],
                         input_record_separator => "\n" );

my $out=Finance::QIF->new(file                   => ">write.qif",
                          input_record_separator => "\n" );


my $header="";
while (my $record=$in->next()) {
  if ($header ne $record->{header}) {
    $out->header($record->{header});
    $header=$record->{header};
  }
  $out->write($record);
}

$in->close();
$out->close();
